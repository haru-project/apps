<!DOCTYPE html>
<html>
<head>
<title>README.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="haru-system">Haru System</h1>
<p>This guide is intended for <strong>non-developers</strong> and walks you through installing, setting up, and running the Haru system.</p>
<h2 id="pre-requisities">Pre-requisities</h2>
<p>Before you begin, make sure you're installing the system on a machine running either Ubuntu 20.xx or 24.xx.</p>
<p>Please note that the Haru system has not been tested on macOS or Windows, and we cannot guarantee compatibility with those platforms.</p>
<p>The Haru system and its applications are packaged using <a href="https://www.docker.com/">Docker</a> and distributed via the GitHub Container Registry (GHCR).</p>
<p>Most applications require access to GPU resources, so ensure that your system has an NVIDIA GPU and the appropriate drivers installed.</p>
<ol>
<li>
<p>Install Docker engine</p>
<p>To install Docker on Ubuntu, follow the official guides here:</p>
<ul>
<li><a href="https://docs.docker.com/engine/install/ubuntu/">Install Docker Engine on Ubuntu</a></li>
<li><a href="https://docs.docker.com/engine/install/linux-postinstall/">Post-installation steps for Linux</a></li>
</ul>
<p>We strongly recommend following the official documentation, as it is regularly updated.</p>
<p>If you're short on time, you can also install Docker by copying and pasting the following commands into your terminal:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Add Docker's official GPG key:</span>
sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

<span class="hljs-comment"># Add the repository to Apt sources:</span>
<span class="hljs-built_in">echo</span> \
<span class="hljs-string">"deb [arch=<span class="hljs-variable">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
<span class="hljs-variable">$(. /etc/os-release &amp;&amp; echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}")</span> stable"</span> | \
sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
sudo apt-get update

<span class="hljs-comment"># Install the Docker packages</span>
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

<span class="hljs-comment"># Create the docker group</span>
sudo groupadd docker

<span class="hljs-comment"># Add your user to the docker group</span>
sudo usermod -aG docker <span class="hljs-variable">$USER</span>
newgrp docker

<span class="hljs-comment"># Configure Docker to start on boot with systemd</span>
sudo systemctl <span class="hljs-built_in">enable</span> docker.service
sudo systemctl <span class="hljs-built_in">enable</span> containerd.service

<span class="hljs-comment"># Run hello-world</span>
docker run hello-world
</div></code></pre>
</li>
<li>
<p>Install the NVIDIA Container toolkit</p>
<p>To enable GPU support in Docker containers, you’ll need to install the NVIDIA Container Toolkit.</p>
<p>Follow the official guide here:</p>
<ul>
<li><a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html#installing-the-nvidia-container-toolkit">Install the NVIDIA Container Toolkit</a></li>
</ul>
<p>We highly recommend using the official documentation, as it is regularly updated and includes troubleshooting steps.</p>
<p>If you prefer a quicker setup, you can also run the following commands in your terminal:</p>
<pre class="hljs"><code><div><span class="hljs-comment"># Configure the production repository</span>
curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \
&amp;&amp; curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \
    sed <span class="hljs-string">'s#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g'</span> | \
    sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list

<span class="hljs-comment"># Update the packages list from the repository</span>
sudo apt-get update

<span class="hljs-comment"># Install the NVIDIA Container Toolkit packages</span>
<span class="hljs-built_in">export</span> NVIDIA_CONTAINER_TOOLKIT_VERSION=1.17.8-1
sudo apt-get install -y \
    nvidia-container-toolkit=<span class="hljs-variable">${NVIDIA_CONTAINER_TOOLKIT_VERSION}</span> \
    nvidia-container-toolkit-base=<span class="hljs-variable">${NVIDIA_CONTAINER_TOOLKIT_VERSION}</span> \
    libnvidia-container-tools=<span class="hljs-variable">${NVIDIA_CONTAINER_TOOLKIT_VERSION}</span> \
    libnvidia-container1=<span class="hljs-variable">${NVIDIA_CONTAINER_TOOLKIT_VERSION}</span>

<span class="hljs-comment"># Configure the container runtime by using the nvidia-ctk command</span>
sudo nvidia-ctk runtime configure --runtime=docker

<span class="hljs-comment"># Restart the Docker daemon</span>
sudo systemctl restart docker
</div></code></pre>
</li>
<li>
<p>Verify the installation</p>
<pre class="hljs"><code><div>docker ps
</div></code></pre>
<p>You should see an empty list, indicating that no containers are currently running.</p>
</li>
</ol>
<h2 id="setup">Setup</h2>
<p>With Docker and the NVIDIA Container Toolkit installed, you're ready to start downloading and running Haru applications.</p>
<ol>
<li>
<p>Authenticate with the Private Registry</p>
<p>Haru applications are hosted in a private registry on GitHub. To authorize your machine to access it, run the following in your terminal:</p>
<pre class="hljs"><code><div><span class="hljs-built_in">export</span> PAT=...
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$PAT</span> | docker login ghcr.io -u AntoineBlanot --password-stdin
</div></code></pre>
</li>
<li>
<p>Download the Base Image</p>
<p>Pull the base image used by all Haru applications:</p>
<pre class="hljs"><code><div>docker pull ghcr.io/haru-project/haru-os:ros2-cyclonedds
</div></code></pre>
</li>
<li>
<p>Confirm the Image Download</p>
<p>Verify that the <code>haru-os</code> image is available locally:</p>
<pre class="hljs"><code><div>docker images
</div></code></pre>
</li>
</ol>
<p>You should see <code>ghcr.io/haru-project/haru-os</code> listed in the output.</p>
<h2 id="install-applications">Install Applications</h2>
<p>As mentioned earlier, each Haru application is packaged as a Docker image.
To install an application, simply pull its corresponding image from the registry.</p>
<p>Most application images follow this format <code>ghcr.io/haru-project/&lt;application-name&gt;:&lt;tag&gt;</code>.
Where:</p>
<ul>
<li><code>&lt;application-name&gt;</code> is the application name</li>
<li><code>&lt;tag&gt;</code> is the application version (e.g., latest)</li>
</ul>
<h3 id="haru-simulator-hs">Haru Simulator (HS)</h3>
<p>The Haru Simulator runs a <strong>virtual Haru</strong>.
It’s perfect for testing and development when you don’t have the physical robot.</p>
<p>To install the simulator, run:</p>
<pre class="hljs"><code><div>docker pull ghcr.io/haru-project/haru-simulator:ros2-fastdds
</div></code></pre>
<h3 id="haru-communication-app-hca">Haru Communication App (HCA)</h3>
<p>The Haru Communication App is Haru’s <strong>main application</strong>.
It’s made up of several Docker images that work together.</p>
<p>To install it, run:</p>
<pre class="hljs"><code><div>docker pull ghcr.io/haru-project/perception-azure-kinect:ros2-fastdds
docker pull ghcr.io/haru-project/perception-faces:ros2-fastdds
docker pull ghcr.io/haru-project/perception-hands:ros2-fastdds
docker pull ghcr.io/haru-project/perception-people:ros2-fastdds
docker pull ghcr.io/haru-project/perception-visualization:ros2-fastdds
docker pull ghcr.io/haru-project/haru-speech:ros2-fastdds
docker pull ghcr.io/haru-project/haru-llm:ros2-fastdds
docker pull ghcr.io/haru-project/agent-reasoner:ros2-fastdds
</div></code></pre>
<h2 id="run-applications">Run Applications</h2>
<h3 id="haru-simulator-hs">Haru Simulator (HS)</h3>
<p>The Haru Simulator uses a graphical interface, so you need to allow Docker to show windows on your screen. Run the following command in your terminal before starting the simulator:</p>
<pre class="hljs"><code><div>xhost +<span class="hljs-built_in">local</span>:docker
</div></code></pre>
<p>This gives Docker permission to display graphical applications on your desktop.</p>
<blockquote>
<p>Note: You only need to do this once per session, or each time you restart your computer.</p>
</blockquote>
<p>To start the Haru Simulator, run the following command in your terminal:</p>
<pre class="hljs"><code><div>docker compose -f apps/docker-compose-hs.yaml --env-file envs/simulator.env up --force-recreate -d
</div></code></pre>
<p>This will launch the simulator in the <strong>background</strong> using the settings from <code>envs/simulator.env</code> file.</p>
<p>To stop the simulator and shut down all related containers, run:</p>
<pre class="hljs"><code><div>docker compose -f apps/docker-compose-hs.yaml down
</div></code></pre>
<p>Once the software is launched, follow these steps:</p>
<ol>
<li>
<p>Set the ROS_IP</p>
<p>Click the red button next to the text box to automatically set your <strong>ROS_IP</strong>.</p>
</li>
<li>
<p>Select the Scene: &quot;Haru Virtual Avatar&quot;</p>
<p>Use the green or yellow buttons next to the scene preview to browse and select &quot;<strong>Haru Virtual Avatar</strong>&quot;.</p>
</li>
<li>
<p>Start the Scene</p>
<p>Click the blue &quot;<strong>Start</strong>&quot; button to begin loading the scene.</p>
</li>
<li>
<p>Open Options</p>
<p>Click the orange &quot;<strong>Options</strong>&quot; button to access the settings.</p>
</li>
<li>
<p>Adjust Scene Configuration</p>
<p>In the &quot;<strong>Scene Configuration</strong>&quot; tab:</p>
<ul>
<li><strong>Disable</strong> the &quot;<strong>Enable py_env</strong>&quot; checkbox (make sure it is unchecked).</li>
<li><strong>Enable</strong> the &quot;<strong>Launch RVIZ</strong>&quot; checkbox (make sure it is checked).</li>
</ul>
</li>
<li>
<p>Adjust Robot Configuration</p>
<p>In the &quot;<strong>Haru Configuration</strong>&quot; tab:</p>
<ul>
<li>Set &quot;<strong>TTS Language</strong>&quot; to <strong>English</strong>.</li>
<li><strong>Enable</strong> the &quot;<strong>Publish Haru TFs</strong>&quot; checkbox.</li>
<li>(Optional) You can also:
<ul>
<li>Change the audio output device using the &quot;<strong>Haru audio device</strong>&quot; option.</li>
<li>Adjust the robot’s position in space via the &quot;<strong>Haru Base Pose</strong>&quot; settings.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Apply and Restart</p>
<p>Click the grey &quot;<strong>Apply and Restart</strong>&quot; button to save changes and reload the scene.</p>
</li>
<li>
<p>Play the Scene</p>
<p>Once the scene reloads, click the green &quot;<strong>Play</strong>&quot; button.</p>
</li>
<li>
<p>Confirm Scene is Active</p>
<p>You should now see the <strong>robot’s eyes and mouth appear</strong>. Additionally, a new window named <strong>RViz</strong> should open.</p>
</li>
<li>
<p>Visualize Robot in RViz</p>
<p>In the <strong>RViz window</strong>:</p>
<ul>
<li>On the left side, find the &quot;<strong>Display</strong>&quot; panel and open the &quot;<strong>RobotModel</strong>&quot; section.</li>
<li>Set the &quot;<strong>Description Topic</strong>&quot; to <code>/robot_description</code>.</li>
</ul>
<p>You should now see a 3D model of the robot appear in the main view.</p>
</li>
<li>
<p>Use the Haru Web Interface</p>
<p>Open your web browser and go to: http://0.0.0.0:7000/haru_web</p>
<ul>
<li>Click on the &quot;Haru control&quot; tab.</li>
<li>From here, you can:
<ul>
<li>Control the robot’s <strong>motors</strong> manually.</li>
<li>Use <strong>Text-To-Speech (TTS)</strong> to make the robot speak.</li>
<li>Trigger <strong>Routines</strong>, which are pre-programmed movements or actions.</li>
</ul>
</li>
</ul>
<blockquote>
<p>Note: This web interface is still experimental, so you may encounter some limitations or bugs.</p>
</blockquote>
</li>
</ol>
<h3 id="haru-communication-app-hca">Haru Communication App (HCA)</h3>
<p>The Haru Communication App uses a graphical interface, so you need to allow Docker to show windows on your screen. Run the following command in your terminal before starting the simulator:</p>
<pre class="hljs"><code><div>xhost +<span class="hljs-built_in">local</span>:docker
</div></code></pre>
<p>This gives Docker permission to display graphical applications on your desktop.</p>
<blockquote>
<p>Note: You only need to do this once per session, or each time you restart your computer.</p>
</blockquote>
<p>HCA is made up of several <strong>layers</strong> that work together.
We recommend starting them <strong>one at a time</strong> so you can confirm each one runs correctly before moving on.</p>
<ol>
<li>
<p>Perception layer</p>
<p>Handles Haru’s vision and sensory input.</p>
<p><strong>Start command</strong>:</p>
<pre class="hljs"><code><div>docker compose -f apps/docker-compose-hca.yaml --env-file envs/perception.env up \
    perception-azure-kinect perception-faces perception-hands perception-people \  
    --force-recreate -d
</div></code></pre>
<p><strong>Expected output</strong>:</p>
<ul>
<li>An RViz window appears showing:
<ul>
<li>Live camera feed</li>
<li>Detected skeletons and tracking markers</li>
</ul>
</li>
</ul>
<p><strong>Related repositories for debug</strong>: <a href="https://github.com/haru-project/strawberry-ros-people">strawberry-ros-people</a></p>
</li>
<li>
<p>Speech layer</p>
<p>Enables Haru’s speech recognition and speech input.</p>
<p><strong>Start command</strong>:</p>
<pre class="hljs"><code><div>docker compose -f apps/docker-compose-hca.yaml --env-file envs/speech.env up \
    speech \  
    --force-recreate -d
</div></code></pre>
<p><strong>Expected output</strong>:</p>
<ul>
<li>Container logs display:
<ul>
<li>VAD (Voice Activity Detection) status</li>
<li>ASR (Automatic Speech Recognition) results for detected speech</li>
</ul>
</li>
</ul>
<p><strong>Related repositories for debug</strong>: <a href="https://github.com/haru-project/haru-spech">haru-speech</a></p>
</li>
<li>
<p>LLM layer</p>
<p>Provides Haru’s large language model capabilities.</p>
<p><strong>Start command</strong>:</p>
<pre class="hljs"><code><div>docker compose -f apps/docker-compose-hca.yaml --env-file envs/llm.env up \
    llm \  
    --force-recreate -d
</div></code></pre>
<p><strong>Expected output</strong>:</p>
<ul>
<li>Container logs confirm:
<ul>
<li>LLM agents are initialized</li>
<li>Models are successfully loaded from the server</li>
</ul>
</li>
</ul>
<p><strong>Related repositories for debug</strong>: <a href="https://github.com/haru-project/haru-llm">haru-llm</a></p>
</li>
<li>
<p>Reasoner layer</p>
<p>Manages decision-making and task execution.</p>
<p><strong>Start command</strong>:</p>
<pre class="hljs"><code><div>docker compose -f apps/docker-compose-hca.yaml --env-file envs/reasoner.env up \
    bt-forest context-manager reasoner \  
    --force-recreate -d
</div></code></pre>
<p><strong>Expected output</strong>:</p>
<ul>
<li>Multiple Groot windows open, displaying:
<ul>
<li>Behavior trees</li>
<li>Current execution status</li>
</ul>
</li>
</ul>
<p><strong>Related repositories for debug</strong>: <a href="https://github.com/haru-project/agent_reasoner">agent_reasoner</a></p>
</li>
</ol>
<p>Once all layers are running, start a task with:</p>
<pre class="hljs"><code><div>docker compose -f apps/docker-compose-hca.yaml --env-file envs/reasoner.env up \
    execute-task \  
    --force-recreate
</div></code></pre>
<p>In the simulator or on the real robot, Haru begins carrying out the assigned task.</p>
<p>To shut down <strong>all layers and running task</strong>, run:</p>
<pre class="hljs"><code><div>docker compose -f apps/docker-compose-hs.yaml down
</div></code></pre>
<h2 id="troubleshooting-tips">Troubleshooting Tips:</h2>
<p>Sometimes, you may need to adjust your settings if things don’t work as expected. Here are a couple of common issues and how to fix them:</p>
<ol>
<li>
<p>Unity Application Won’t Start</p>
<p>If the Unity interface fails to open:</p>
<ul>
<li>In <strong>both</strong> your host system and the Haru Simulator container, run:<pre class="hljs"><code><div>env | grep DISPLAY
</div></code></pre>
</li>
<li>Compare the values. They must be identical.</li>
<li>If they are different, edit the file envs/simulator.env and replace:<pre class="hljs"><code><div>DISPLAY=<span class="hljs-variable">${DISPLAY:-=:0}</span>
</div></code></pre>
with the actual value from your host system.</li>
</ul>
</li>
<li>
<p>No Sound in Robot Simulation</p>
<p>If you can’t hear Haru in the simulation:</p>
<ul>
<li>Open &quot;<strong>Options</strong>&quot; &gt; &quot;<strong>Haru Configuration</strong>&quot; in the simulator.</li>
<li>Find the <strong>Haru audio device</strong> setting.</li>
<li>Try changing its value (common options are <code>-1</code>, <code>0</code>, <code>1</code>, …) until audio works.</li>
</ul>
</li>
<li>
<p>View Logs for More Information</p>
<p>If the problem persists, checking the logs can help identify errors:</p>
<pre class="hljs"><code><div>docker logs &lt;container_name&gt;
</div></code></pre>
<p>Replace <code>&lt;container_name&gt;</code> with the name of your running container.
The logs will often include warnings or error messages you can use for troubleshooting.</p>
</li>
</ol>

</body>
</html>
